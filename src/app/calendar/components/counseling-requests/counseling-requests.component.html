<ejs-schedule #scheduleObj [eventSettings]="eventSettings" locale="es" (popupOpen)="onPopupOpen($event)">
    <ng-template #editorTemplate let-data>
        <form class="custom-event-editor">
            <div>
                <label class="e-textlabel">Asunto</label>
                <input id="Subject" class="e-field e-input" type="text" data-name="Subject" name="Subject"/>
            </div>

            <div>
                <label class="e-textlabel">Lugar</label>

                <input id="Location" class="e-field e-input" value="{{ data.Location }}" type="text"
                    data-name="Location" name="Location"/>
            </div>

            <div>
                <label class="e-textlabel">Inicio</label>
                <input id="StartTime" class="e-field" type="text" data-name="StartTime" name="StartTime" />
            </div>

            <div>
                <label class="e-textlabel">Fin</label>
                <input id="EndTime" class="e-field" type="text" data-name="EndTime" name="EndTime" />
            </div>

            <div>
                <label class="e-textlabel">Descripci贸n</label>
                <textarea id="Description" class="e-field e-input" data-name="Description" name="Description"
                    rows="3" cols="50" style="width: 100%; height: 60px !important; resize: vertical;"></textarea>
            </div>
        </form>
    </ng-template>
</ejs-schedule>

<!-- Search engine -->
<div nz-row [nzGutter]="[10, 10]">
    <!-- Code -->
    <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="6" nzXl="6">
        <label>NIE: </label>
        <nz-input-group [nzSuffix]="inputClearCode">
            <input nz-input [(ngModel)]="searchParams.code" placeholder="Buscar NIE" />
        </nz-input-group>
        <ng-template #inputClearCode>
            <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="searchParams.code" (click)="searchParams.code = null; getStudents()"></i>
        </ng-template>
    </div>

    <!-- Name -->
    <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="6" nzXl="6">
        <label>Nombre: </label>
        <nz-input-group [nzSuffix]="inputClearName">
            <input nz-input [(ngModel)]="searchParams.firstname" placeholder="Buscar nombre" />
        </nz-input-group>
        <ng-template #inputClearName>
            <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="searchParams.firstname" (click)="searchParams.firstname = null; getStudents()"></i>
        </ng-template>
    </div>

    <!-- Lastname -->
    <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="6" nzXl="6">
        <label>Apellido: </label>
        <nz-input-group [nzSuffix]="inputClearLastname">
            <input nz-input [(ngModel)]="searchParams.lastname" placeholder="Buscar apellido" />
        </nz-input-group>
        <ng-template #inputClearLastname>
            <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="searchParams.lastname" (click)="searchParams.lastname = null; getStudents()"></i>
        </ng-template>
    </div>

    <!-- Email -->
    <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="6" nzXl="6">
        <label>Correo electr贸nico: </label>
        <nz-input-group [nzSuffix]="inputClearEmail">
            <input nz-input [(ngModel)]="searchParams.email" placeholder="Buscar correo electr贸nico" />
        </nz-input-group>
        <ng-template #inputClearEmail>
            <i nz-icon class="ant-input-clear-icon" nzTheme="fill" nzType="close-circle" *ngIf="searchParams.email" (click)="searchParams.email = null; getStudents()"></i>
        </ng-template>
    </div>

    <!-- Grade -->
    <!-- <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="10" nzXl="10">
        <label>Grado: </label>
        <nz-select class="grade" nzShowSearch nzAllowClear nzPlaceHolder="Seleccionar" [(ngModel)]="searchParams.grade.id" (ngModelChange)="getStudents()">
            <nz-option *ngFor="let grade of grades" [nzLabel]="grade.name" [nzValue]="grade.id"></nz-option>
        </nz-select>
    </div> -->

    <!-- Search button-->
    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="4" nzXl="4">
      <div class="btn-container" nz-row nzAlign="bottom" nzJustify="end">
        <button nz-button nzType="primary" (click)="getStudents()">Buscar</button>
      </div>
    </div>
</div>

<!-- Sorters -->
<div nz-row>
    <div class="params">
        <div class="param">
            <a (click)="updateParams('firstname')">
                <div class="param-key">Nombres</div> 
                <div class="param-value">
                    <div><i nz-icon nzType="caret-up" nzTheme="outline" [ngClass]="{'principal': params.sort[0].value === 'ascend'}"></i></div>
                    <div class="caret-down"><i nz-icon nzType="caret-down" nzTheme="outline" [ngClass]="{'principal': params.sort[0].value === 'descend'}"></i></div>
                </div>
            </a>
        </div>
        <div class="param">
            <a (click)="updateParams('lastname')">
                <div class="param-key">Apellidos</div> 
                <div class="param-value">
                    <div><i nz-icon nzType="caret-up" nzTheme="outline" [ngClass]="{'principal': params.sort[1].value === 'ascend'}"></i></div>
                    <div class="caret-down"><i nz-icon nzType="caret-down" nzTheme="outline" [ngClass]="{'principal': params.sort[1].value === 'descend'}"></i></div>
                </div>
            </a>
        </div>
        <div class="param">
            <a (click)="updateParams('email')">
                <div class="param-key">Correo electr贸nico</div> 
                <div class="param-value">
                    <div><i nz-icon nzType="caret-up" nzTheme="outline" [ngClass]="{'principal': params.sort[2].value === 'ascend'}"></i></div>
                    <div class="caret-down"><i nz-icon nzType="caret-down" nzTheme="outline" [ngClass]="{'principal': params.sort[2].value === 'descend'}"></i></div>
                </div>
            </a>
        </div>
        <div class="param">
            <a (click)="updateParams('date')">
                <div class="param-key">Fecha</div> 
                <div class="param-value">
                    <div><i nz-icon nzType="caret-up" nzTheme="outline" [ngClass]="{'principal': params.sort[3].value === 'ascend'}"></i></div>
                    <div class="caret-down"><i nz-icon nzType="caret-down" nzTheme="outline" [ngClass]="{'principal': params.sort[3].value === 'descend'}"></i></div>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- Student's requests -->
<div nz-row>
    <nz-spin nzTip="Cargando ..." [nzSpinning]="loading">
        <div nz-row nzJustify="center">
            <div *ngFor="let student of listOfDisplayData" nz-col nzXs="24" nzSm="12" nzMd="8" nzLg="6" nzXl="5" nzXxl="4" class="student">
                <nz-card>
                    <nz-card-meta [nzAvatar]="avatarTemplate" [nzTitle]="[student.firstname + ' ' + student.lastname]" [nzDescription]="student.code"></nz-card-meta>
                    <p>{{ student.currentGrade.name }}</p>
                    <p>17/10/2020</p>
                    <div nz-row nzJustify="center" nzAlign="top">
                        <button nz-button nzType="primary" nzGhost>Ver</button>
                    </div>
                </nz-card>
                <ng-template #avatarTemplate>
                    <nz-avatar nzSrc="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"></nz-avatar>
                </ng-template>
            </div>
        </div>
    </nz-spin>
</div>

<!-- Pagination -->
<div nz-row nzJustify="center" nzAlign="top">
    <nz-pagination [nzPageIndex]="pagination.page" [nzTotal]="pagination.totalItems" [nzSize]="'small'" (nzPageIndexChange)="paginate($event)"></nz-pagination>
</div>